from distutils.core import setup
from distutils.extension import Extension
from Cython.Build import cythonize
import eigency
from sys import platform

# force clang use libc++ instead of the default libstdc++ shipped with MacOSX, which doesn't support c++11
libc_flag = []
if platform == "darwin":
    libc_flag = ["-stdlib=libc++"]

setup(
  ext_modules = cythonize(Extension(
    "gtsam",
    sources=["gtsam.pyx"],
    include_dirs = ["${CMAKE_SOURCE_DIR}", "${CMAKE_BINARY_DIR}",
                    "${CMAKE_SOURCE_DIR}/gtsam/3rdparty/Eigen"
                    ] + eigency.get_includes(include_eigen=False),
    libraries = ['gtsam'],
    library_dirs = ["${CMAKE_BINARY_DIR}/gtsam"],
    language="c++",
    extra_compile_args=["-std=c++11"] + libc_flag,
    extra_link_args=libc_flag)),
)
